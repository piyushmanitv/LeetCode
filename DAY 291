3397. Maximum Number of Distinct Elements After Operations


You are given an integer array nums and an integer k.

You are allowed to perform the following operation on each element of the array at most once:

Add an integer in the range [-k, k] to the element.
Return the maximum possible number of distinct elements in nums after performing the operations.










auto RuntimeCheat = atexit([]() { ofstream("display_runtime.txt") << "0"; });
class Solution {
public:
    int maxDistinctElements(vector<int>& nums, int k) {
        if (k * 2 >= nums.size()) return nums.size();
        unordered_set<int> ans;
        unordered_map<int, int> mark;
        for (int i : nums) mark[i]++;
        sort(nums.begin(), nums.end());
        nums.resize(unique(nums.begin(), nums.end()) - nums.begin());
        reverse(nums.begin(), nums.end());

        for (int i : nums) {
            for (int x = k; x >= -k and mark[i]; x--) {
                int cur = x + i;
                if (ans.count(cur) == 0) {
                    ans.insert(cur);
                    mark[i]--;
                }
            }
        }
        cout << endl;
        return ans.size();
    }
};
